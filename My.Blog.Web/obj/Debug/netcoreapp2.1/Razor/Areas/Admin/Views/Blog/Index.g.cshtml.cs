#pragma checksum "C:\Users\MY\source\repos\MyBlogDemo\My.Blog.Web\Areas\Admin\Views\Blog\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1851fb95245696ae854bdd7da0228cb492be1ffb"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Admin_Views_Blog_Index), @"mvc.1.0.view", @"/Areas/Admin/Views/Blog/Index.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Areas/Admin/Views/Blog/Index.cshtml", typeof(AspNetCore.Areas_Admin_Views_Blog_Index))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1851fb95245696ae854bdd7da0228cb492be1ffb", @"/Areas/Admin/Views/Blog/Index.cshtml")]
    public class Areas_Admin_Views_Blog_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<My.Blog.Model.Blog>>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("layui-btn"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/Admin/Blog/Add"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(33, 163, true);
            WriteLiteral("<blockquote class=\"layui-elem-quote\">文章管理</blockquote>\r\n<style>\r\n    div.first {\r\n        padding: 10px;\r\n    }\r\n</style>\r\n<div class=\"first\">\r\n    <div>\r\n        ");
            EndContext();
            BeginContext(196, 109, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "4aabec13cfdd473395219e201867af26", async() => {
                BeginContext(241, 60, true);
                WriteLiteral("\r\n            <i class=\"layui-icon\">&#xe654;</i>添加\r\n        ");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(305, 659, true);
            WriteLiteral(@"
        <div class=""layui-input-inline"">
            <input id=""search_key"" class=""layui-input"" type=""text"" placeholder=""标题关键字"" />
        </div>
        <label>发布时间：</label>
        <div class=""layui-input-inline"">
            <input id=""search_start"" class=""layui-input"" type=""text"" placeholder=""开始时间""/>
        </div>
        <label>~</label>
        <div class=""layui-input-inline"">
            <input id=""search_end"" class=""layui-input"" type=""text"" placeholder=""结束时间""/>
        </div>
        <div class=""layui-input-inline"">
            <select id=""search_number"" class=""layui-select"">
                <option value="""">--所有分类--</option>
");
            EndContext();
#line 27 "C:\Users\MY\source\repos\MyBlogDemo\My.Blog.Web\Areas\Admin\Views\Blog\Index.cshtml"
                 foreach (My.Blog.Model.Category ca in ViewBag.calist) {

#line default
#line hidden
            BeginContext(1038, 27, true);
            WriteLiteral("                    <option");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 1065, "\"", 1083, 1);
#line 28 "C:\Users\MY\source\repos\MyBlogDemo\My.Blog.Web\Areas\Admin\Views\Blog\Index.cshtml"
WriteAttributeValue("", 1073, ca.Number, 1073, 10, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1084, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(1086, 15, false);
#line 28 "C:\Users\MY\source\repos\MyBlogDemo\My.Blog.Web\Areas\Admin\Views\Blog\Index.cshtml"
                                          Write(ca.CategoryName);

#line default
#line hidden
            EndContext();
            BeginContext(1101, 11, true);
            WriteLiteral("</option>\r\n");
            EndContext();
#line 29 "C:\Users\MY\source\repos\MyBlogDemo\My.Blog.Web\Areas\Admin\Views\Blog\Index.cshtml"
                }

#line default
#line hidden
            BeginContext(1131, 5317, true);
            WriteLiteral(@"            </select>
        </div>
        <div class=""layui-input-inline"">
            <button class=""layui-btn layui-btn-radius layui-btn-normal"" type=""button"" onclick=""search()"" >
            <i class=""layui-icon"">&#xe615;</i>查询</button>
        </div>
    </div>
    <table class=""layui-table"">
        <thead>
            <tr>
                <th>发布时间</th>
                <th>博客标题</th>
                <th>所属分类</th>
                <th>访问量</th>
                <th>排序号</th>
                <th>管理</th>
            </tr>
        </thead>
        <tbody id=""tbody""></tbody>
    </table>

    <div>
        总共有<span id=""totalCount""></span>篇博客，
        当前是第<span id=""pageIndex""></span>页/共<span id=""pageCount""></span>页
    </div>
    <div id=""pages""></div> 
</div>

<script>

    //日期控件设置
    layui.use('laydate', function () {
        var laydate = layui.laydate;

        //执行一个laydate实例
        document.getElementById('search_start').onclick = function () {
            laydate({ e");
            WriteLiteral(@"lem: this }); //指定元素
        }

        document.getElementById('search_end').onclick = function () {
            laydate({ elem: this }); //指定元素
        }
    });

    //分页显示
    var pagesize = 15;//每页数据
    layui.use(['laypage','layer'], function () {
        var laypage = layui.laypage, layer = layui.layer, $ = layui.jquery;
        var url = ""/Admin/Blog/GetBlogTotalCount?t="" + new Date().valueOf();
        var postData = getdata();
        $.post(url, postData, function (count) {
            console.log(""取到的博客总数："" + count);
            $('#totalCount').html(count);
            $('#pageCount').html(Math.ceil(count / pagesize));
            //执行一个laypage实例
            laypage({
                cont: 'pages',
                pages: Math.ceil(count/pagesize),//js数据除法带小数
                jump: function (obj) {
                    var pageindex = obj.curr;
                    //读取后台数据返回json后拼接
                    load_blog_data(pageindex);
                }
            })
        })");
            WriteLiteral(@"
    });
    //加载第x页数据
    function load_blog_data(pageindex) {
        console.log(""加载第"" + pageindex + ""页"");        
        var url = ""/Admin/Blog/GetBlogList?pageIndex="" + pageindex + ""&pagesize="" + pagesize;
        layui.use(['laypage', 'layer'], function () {
            var laypage = layui.laypage, layer = layui.layer, $ = layui.jquery;
            $('#pageIndex').html(pageindex);
            var postData = getdata();
            $.post(url, postData, function (json) {
                var html = '';
                $.each(json, function (i, blog) {
                    html += '<tr>';
                    html += '<td>' + blog.createDate + '</td >';
                    html += '<td>' + blog.title + '</td >';
                    html += '<td>' + blog.categoryName + '</td >';
                    html += '<td>' + blog.visitNum + '</td >';
                    html += '<td>' + blog.sort + '</td >';
                    html += '<td>';
                    html += '<a href=""/Admin/Blog/Add/' +");
            WriteLiteral(@" blog.id + '""><i class=""layui-icon"">&#xe642;</i>编辑</a>';
                    html += '<a href=""javascript:void()0"" onclick=""del(' + blog.id + ')""><i class=""layui-icon"">&#xe640;</i>删除</a>';
                    html += '</td>';
                    html += '</tr>';
                })
                $('#tbody').html(html);
            }, 'json');
        })
    }

    //拼接条件返回postData
    function getdata() {
        var key = document.getElementById(""search_key"").value;
        var start = document.getElementById(""search_start"").value;
        var end = document.getElementById(""search_end"").value;
        var number = document.getElementById(""search_number"").value;
        var postData = {
            key:key,
            start:start,
            end:end,
            number:number
        };
        return postData;
    }

    //按条件查询
    function search() {
        layui.use(['laypage', 'layer'], function () {
            var laypage = layui.laypage, layer = layui.layer, $ = layui.j");
            WriteLiteral(@"query;
            var url = ""/Admin/Blog/GetBlogTotalCount?t="" + new Date().valueOf();
            var postData = getdata();
            $.post(url, postData, function (count) {
                console.log(""取到的博客总数："" + count);
                $('#totalCount').html(count);
                $('#pageCount').html(Math.ceil(count / pagesize));
                //执行一个laypage实例
                laypage({
                    cont: 'pages',
                    pages: Math.ceil(count / pagesize),//js数据除法带小数
                    jump: function (obj) {
                        var pageindex = obj.curr;
                        //读取后台数据返回json后拼接
                        load_blog_data(pageindex);
                    }
                })
            })
        });
    }

    //删除
    function del(id) {
        layui.use('layer', function(){
            var layer = layui.layer;
            var $ = layui.jquery;
            layer.confirm('是否删除？', function () {
                var url = ""/Admin/Blog/Del/""");
            WriteLiteral(" + id;\r\n                $.post(url, function (data) {\r\n                    layer.alert(data, function () { location.reload(); });\r\n                })\r\n            })\r\n        })\r\n    }\r\n</script>\r\n");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<My.Blog.Model.Blog>> Html { get; private set; }
    }
}
#pragma warning restore 1591
